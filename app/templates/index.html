{% extends 'base.html' %}

{% block title %} <title>FictionStore</title> {% endblock %}

{% block content %}

<main>
    <h1>–ò—â–∏—Ç–µ <b>–ª—é–±—ã–µ</b> –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏—è!</h1>
    <form class="searcher" action="catalog">
        <select id="searchCharacter">
            <option>–ö–∞—Ç–∞–ª–æ–≥</option>
            <option>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</option>
            <option>Sales</option>
            <option>–ö–∞—Ä—Ç–∏–Ω—ã</option>
            <option>–ú–æ–¥–µ–ª—å</option>
        </select>
        <input type="text" method="GET" name="search" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" id="search">
        <button id="search" onclick="searchInfo()"><img src="static/img/gui/arrow.svg"></button>
    </form>
    <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ: <a href="/catalog?search=tardis" id="1">tardis</a></p>
</main>
<section>
    <div class="head">
                <span>
                    <h3>üõí –ß—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å</h3>
                </span>
        <button><a href="catalog">–í–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥</a></button>
    </div>
    <div class="gallery">

        {% for item in items %}

            <div class="card">
                <a href="product?id={{ item.id }}">
                    <img src="/static/img/items/{{ item.images.0 }}" alt="">
                </a>
                <div>
                    <a href="product?id={{ item.id }}">
                        <h4>{{ item.title }}</h4>
                    </a>
                    <p>{{ item.description[:130] }}‚Ä¶</p>
                </div>
            </div>

        {% endfor %}

    </div>
</section>
<section>
    <div class="head">
                <span>
                    <h3>üî• –ë–µ—Å—Ç—Å–µ–ª–ª–µ—Ä—ã</h3>
                </span>
        <button><a href="catalog">–í–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥</a></button>
    </div>
    <div class="gallery">

        {% for item in best_items %}

            <div class="card">
                <a href="product?id={{ item.id }}">
                    <img src="/static/img/items/{{ item.images.0 }}" alt="">
                </a>
                <div>
                    <a href="product?id={{ item.id }}">
                        <h4>{{ item.title }}</h4>
                    </a>
                    <span class="stars">
                        <img src="static/img/gui/star.svg" alt="">
                        <img src="static/img/gui/star.svg" alt="">
                        <img src="static/img/gui/star.svg" alt="">
                        <img src="static/img/gui/star.svg" alt="">
                        <img src="static/img/gui/star.svg" alt="">
                        <p>4.8</p>
                    </span>
                    <span>
                        <div class="price">
                            <p>{{ item.price }} &#8381;</p>
                        </div>
                        <div class="icons">
                            <a href='#'> <img src="static/img/gui/telega_small.svg" alt=""> </a>
                            <a href='#'><img src="static/img/gui/favourite_small.svg" alt=""> </a>
                        </div>
                    </span>
                </div>
            </div>

        {% endfor %}

    </div>
</section>
<span class="description-index">
    <img src="static/img/gui/logowhite2.svg" alt="">
    <p class="dtext">FictionStore ‚Äì —ç—Ç–æ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç —Å –ø—Ä–∏–º–µ—Å—å—é –≤–µ—Å–µ–ª—å—è –∏ –≤–æ–ª—à–µ–±—Å—Ç–≤–∞, –≥–¥–µ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –º–∏—Ä–µ —Ç–æ–≤–∞—Ä—ã –∏ –Ω–µ —Ç–æ–ª—å–∫–æ.
        –ü–æ —Å—É—Ç–∏, —ç—Ç–æ —Å–∞–π—Ç, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã —Å–º–æ–∂–µ—Ç–µ –∫—É–ø–∏—Ç—å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –¥–∞–ª–µ–∫–æ–≥–æ –±—É–¥—É—â–µ–≥–æ, –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–µ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏—è –ø–æ —Ç–∏–ø—É –º–∞—à–∏–Ω—ã –≤—Ä–µ–º–µ–Ω–∏ –∏–ª–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ
        –¥–≤–∏–≥–∞—Ç–µ–ª—è, –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏–ª–∏ –ø–æ—Å—Ç–µ—Ä—ã —Å —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–∏—è–º–∏. –¢–∞–∫–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –∫–æ–ª–ª–µ–∫—Ü–∏—é –º–æ–¥–µ–ª–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–∞ –Ω–∞—à–µ–º
        —Å–∞–π—Ç–µ. –í—Å–µ, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ —ç—Ç–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —É–¥–æ–±–Ω—ã–º –ø–æ–∏—Å–∫–æ–º –Ω–∞ —Å–∞–π—Ç–µ, –≤—ã–±—Ä–∞—Ç—å –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏–π—Å—è –≤–∞–º —Ç–æ–≤–∞—Ä –∏ –∑–∞–∫–∞–∑–∞—Ç—å.</p>
</span>
<div class="notification">
  <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ–∫–Ω–∞ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
</div>

<script>
    function searchInfo() {
        window.location.replace("catalog");
        let info = document.getElementById("searchCharacter").value + document.getElementById("search").value;
        let acc = JSON.stringify(info);
        let request;
        if (window.XMLHttpRequest) {
            request = new XMLHttpRequest();
        } else {
            request = new ActiveXObject("Microsoft.XMLHTTP");
        }
        request.open("GET", "/");
        request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        request.onreadystatechange = function () {
            if (request.readyState === 4 && request.status == 200) {
                let catalog = request.response;
                localStorage.setItem("catalog", catalog);
            }
        }
        request.send("search=" + info);
    }
</script>

{% endblock %}
